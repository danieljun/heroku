/*! RDStation 2016-06-27 */
var CityInputFieldHandler = {
    hostName: "https://www.rdstation.com.br",
    init: function(a, b) {
        var c = this;
        this.uf_field = b, a.select2({
            ajax: {
                url: c.hostName + "/api/cidades/",
                dataType: "json",
                delay: 250,
                data: function(a) {
                    return {
                        term: a,
                        state_acronym: c.uf_field.val()
                    }
                },
                results: function(a, b) {
                    return {
                        results: a.cities
                    }
                },
                cache: !0
            },
            formatResult: c.formatCity,
            formatSelection: c.formatCity,
            initSelection: c.selectedCity
        })
    },
    formatCity: function(a) {
        return value = a.name, CityInputFieldHandler.uf_field.val() || (value += " - " + a.state), value
    },
    selectedCity: function(a, b) {
        var c = $(a).val();
        "" !== c && $.ajax({
            type: "GET",
            url: CityInputFieldHandler.hostName + "/api/cidades/" + c,
            dataType: "json"
        }).done(function(a) {
            b(a.city)
        })
    }
};

$(document).ready(function(a){
    CityInputFieldHandler.init(a("#city_id"), a("#uf"));
});

// $(document).ready(function(a) {
//     a("#ajax-loader").hide();
//     var b = Math.floor(11 * Math.random()) + 1,
//         c = Math.floor(11 * Math.random()) + 1;
//     a("#math_expression").html(b + " + " + c + " = ?"), jQuery.validator.addMethod("math", function(a, d) {
//         return a == b + c
//     }, "Resultado incorreto"), setUtmzVal();
//     var d = a("#conversion-form").attr("action") + ".js",
//         e = {
//             url: d,
//             type: "GET",
//             xhrFields: {
//                 withCredentials: !0
//             },
//             dataType: "script",
//             beforeSubmit: preSubmit,
//             complete: ajaxCb,
//             data: {
//                 query_params: getQueryParams(),
//                 client_id: ''
//             }
//         };
//     a("#conversion-form").ajaxForm(e), a(".phone").bind("keyup change", PhoneInputFieldHandler.formatPhoneMask), a(".phone").trigger("change"), initAutofill(), CityInputFieldHandler.init(a("#city_id"), a("#uf"))
// }), $(window).load(function() {
//     setTrafficSourceVal()
// });